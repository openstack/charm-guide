.. _release_notes_21.10:

=================================
21.10 (Draft version in progress)
=================================

Summary of changes
------------------

* New charm features
   * `ceilometer-agent charm: new polling configuration options`_
   * `cinder-purestorage charm: new configuration options`_
   * `ceph-mon charm: disk capacity alert threshold configuration`_
   * `designate charm: new options for creating DNS records`_
   * `nova-compute charm: new options for neutron physnets NUMA affinity`_
   * `ceph-osd charm: new action to display availability zones information`_
   * `manila charm: new relation nrpe-external-master to nrpe charm`
   * `ceph-mon charm: new parameter for list-pools action`_

* New tech-preview charms
   * `<TITLE>`_

* Informational notices
   * `neutron-openvswitch charm: DHCP service restarts in DPDK environments`_

* Deprecation notices
   * `<TITLE>`_

* Removed features
   * `<TITLE>`_

Overview
--------

The 21.10 OpenStack Charms release includes updates for the charms described on
the `Charms`_ page. As of this release, the project consists of
<NUMBER-OF-STABLE-CHARMS> supported (stable) charms.

For the list of bugs resolved in this release refer to the `21.10 milestone`_
in Launchpad.

For scheduling information of past and future releases see the `Release
schedule`_.

General charm information is published in the `OpenStack Charm Guide`_ (this
guide) which ultimately supersedes Release Notes contents.

.. important::

   Always upgrade to the latest stable charms before making any major changes
   to your cloud and before filing bug reports. Refer to section `Upgrading
   charms`_ below for details.

New charm features
------------------

With each new feature, there is a corresponding example bundle in the form of a
test bundle, and/or a section in the `OpenStack Charms Deployment Guide`_, that
details its usage. Test bundles are located in the ``src/tests/bundles``
directory of the relevant charm repository (see all `charm repositories`_).

glance charm: external S3 compatible storage support
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The glance charm has acquired some new configuration options:

* s3-store-host
* s3-store-access-key
* s3-store-secret-key
* s3-store-bucket

These options are used to set an external S3 compatible storage backend for
Glance. S3 support in the charm is enabled only for Ussuri and later releases.

nova-compute charm: number of hosted VMs
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The nova-compute charm has a new action: ``instance-count``.

This action returns the number of VMs hosted on a nova-compute unit, whether
they be running, suspended, or stopped.

ceilometer-agent charm: new polling configuration options
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ceilometer-agent charm has two new options: ``polling-interval`` and
``enable-all-pollsters``.

These can be used to control the polling frequency and the set of meters
collected by the compute polling agent. The meters that can be collected via
``enable-all-pollsters`` are listed in `Compute meters documentation`_ with
'Pollster' in the origin column.

cinder-purestorage charm: new configuration options
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The cinder-purestorage charm has a number of new configuration options:

* ``eradicate-on-delete``
* ``automatic-max-oversubscription``
* ``iscsi-cidr``
* ``use-chap``
* ``use-replication``
* ``replication-target-name``
* ``replication-target-address``
* ``replication-target-api-token``
* ``replication-type``
* ``replication-sync-uniform``
* ``replica-interval``
* ``replica-retention-short``
* ``replica-retention-per-day``
* ``replica-retention-long``
* ``replication-pgname``
* ``replication-pod``
* ``use-image-cache``
* ``image-volume-cache-max-size-gb``
* ``image-volume-cache-max-count``

These options are used to enable and configure Cinder replication and
Glance Image Cache for Cinder, along with a number of Pure Storage
driver specific features.

Please refer to the `cinder-purestorage`_ charm documentation for a description
of these configuration options.

neutron-api charm: FWaaS option
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The neutron-api charm has a new configuration option: ``enable-fwaas``.

This option controls the enablement of the Neutron FWaaS service. It defaults
to 'true' to retain past behaviour but only takes effect for OpenStack releases
older than Victoria. Setting it to 'false' will disable the service on all
neutron-api units.

See deprecation notice `neutron-api charm: FWaaS removal`_ for background
information.

ceph-mon charm: disk capacity alert threshold configuration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ceph-mon charm has two new configuration options:
``monitor-data-available-warning`` and ``monitor-data-available-critical``.

These options can be used to configure the thresholds at which the Ceph cluster
goes into HEALTH_WARN and HEALTH_ERR states based on the available disk
capacity.

ceph-radosgw charm: Beast HTTP frontend
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ceph-radosgw charm has a new configuration option: ``http-frontend``.

With the availability of the Beast frontend the ceph-radosgw charm now supports
the selection of what Ceph RADOS Gateway HTTP frontend to use. Starting with
Ceph Octopus the default value (of option ``http-frontend``) is 'beast', and
for older releases 'civetweb' will continue to be used.

designate charm: new options for creating DNS records
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The designate charm has some new configuration options:

* ``default-ttl``
* ``default-soa-minimum``
* ``default-soa-refresh-min``
* ``default-soa-refresh-max``
* ``default-soa-retry``

These options are used to define default settings for the creation of DNS
records. They have no effect on existing records.

nova-compute charm: new options for neutron physnets NUMA affinity
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The nova charm has some new configuration options:

* ``neutron-physnets``
* ``neutron-tunnel``

These options are used to define NUMA affinity for neutron physnets and
tunneled networks.

ceph-osd charm: new action to display availability zones information
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ceph-osd charm has a new action: ``get-availability-zone``.

This action returns availability zone information that contains CRUSH structure
information. Specifically 'rack', 'row', etc.

manila charm: new relation nrpe-external-master to nrpe charm
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The manila charm has a new relation to nrpe charm.

This relation adds nrpe checks for services managed by manila charm
to be monitored with Nagios.

ceph-mon charm: new parameter for list-pools action
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The ceph-mon charm's list-pools action has a new `format` parameter that
accepts the following values:

* ``text`` - provides less information [default]
* ``text-full`` - provides more information in json with indents
* ``json`` - provides more information in json

The default `text` provides the same output as previous version.


New stable charms
-----------------

<TITLE>
~~~~~~~

New tech-preview charms
-----------------------

Ironic charms
~~~~~~~~~~~~~

The following tech-preview charms are available for the deployment of OpenStack
Ironic:

* ironic-api
* ironic-conductor
* neutron-api-plugin-ironic

Ironic provisions bare metal, as opposed to virtual, machines.

Preview charm features
----------------------

<TITLE>
~~~~~~~

Documentation updates
---------------------

In the `OpenStack Charms Deployment Guide`_ (aka "deploy guide"):

* A new page on OpenStack Ironic support has been added.
* A new section on cloud operations has been started.

Informational notices
---------------------

neutron-openvswitch charm: DHCP service restarts in DPDK environments
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When DPDK is enabled and DHCP is running locally on a compute node, the
neutron-dhcp-agent service now restarts during charm upgrades or when any
configuration change that triggers the restart of the neutron-openvswitch
agent.

Deprecation notices
-------------------

Xenial Series
~~~~~~~~~~~~~

The Ubuntu 'Xenial' series will be removed from general gate testing following
this release and maintenance will be limited to critical and high security
fixes only. Users are strongly encouraged to upgrade their clouds to a newer
platform.

Barbican SoftHSM2 Plugin
~~~~~~~~~~~~~~~~~~~~~~~~

The `barbican-softhsm`_ test charm is now deprecated and will have no further
releases. Support has ended for it. Please use `barbican-vault`_ instead.

neutron-api charm: FWaaS removal
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The Firewall-as-a-Service (FWaaS) OpenStack project is `retired`_ and will not
receive updates beyond ``v16.0.0``. Consequently, the neutron-api charm will no
longer make this service available starting with OpenStack Victoria.

See new charm feature `neutron-api charm: FWaaS option`_ resulting as a
consequence of this.

Tempest charm
~~~~~~~~~~~~~

The `tempest`_ test charm is now deprecated and will have no further
releases. Support has ended for it. Please use the `tempest Python package`_
instead.

Removed features
----------------

<TITLE>
~~~~~~~

Removed charms
--------------

<TITLE>
~~~~~~~

Issues discovered during this release cycle
-------------------------------------------

<TITLE>
~~~~~~~

Upgrading charms
----------------

Upgrading charms will making available new features and bug fixes. However, the
latest stable charm revision should also be used prior to making any
topological changes, application migrations, workload upgrades, or series
upgrades. Bug reports should also be filed against the most recent revision.

Note that charm upgrades and OpenStack upgrades are functionally different. For
instructions on performing the different upgrade types see `Upgrades overview`_
in the `OpenStack Charms Deployment Guide`_.

.. LINKS
.. _Charms: openstack-charms.html
.. _21.10 milestone: https://launchpad.net/openstack-charms/+milestone/21.10
.. _OpenStack Charms Deployment Guide: https://docs.openstack.org/project-deploy-guide/charm-deployment-guide/latest
.. _OpenStack Charm Guide: https://docs.openstack.org/charm-guide/latest/
.. _Release schedule: release-schedule.html
.. _Upgrades overview: https://docs.openstack.org/project-deploy-guide/charm-deployment-guide/latest/upgrade-overview.html
.. _charm repositories: https://opendev.org/openstack?sort=alphabetically&q=charm-&tab=
.. _barbican-softhsm: https://jaas.ai/u/openstack-charmers/barbican-softhsm
.. _barbican-vault: https://jaas.ai/barbican-vault
.. _cinder-purestorage: https://jaas.ai/cinder-purestorage
.. _tempest: https://jaas.ai/u/openstack-charmers/tempest
.. _tempest Python package: https://pypi.org/project/tempest/
.. _Compute meters documentation: https://docs.openstack.org/ceilometer/latest/admin/telemetry-measurements.html#telemetry-compute-meters
.. _retired: https://docs.openstack.org/releasenotes/neutron-fwaas-dashboard/ussuri.html

.. COMMITS

.. BUGS
