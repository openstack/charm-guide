.. _release_notes_17.11

=====
17.11
=====

Summary
=======

The 17.11 OpenStack Charm release includes updates for the following charms:

* aodh
* barbican
* ceilometer
* ceilometer-agent
* ceph
* ceph-fs
* ceph-mon
* ceph-osd
* ceph-radosgw
* cinder
* cinder-backup
* cinder-ceph
* designate
* designate-bind
* glance
* gnocchi
* hacluster
* heat
* keystone
* keystone-ldap
* lxd
* manila
* manila-generic
* neutron-api
* neutron-api-odl
* neutron-openvswitch
* neutron-gateway
* nova-cloud-controller
* nova-compute
* odl-controller
* openstack-dashboard
* openvswitch-odl
* percona-cluster
* rabbitmq-server
* swift-proxy
* swift-storage

New Charm Features
==================

QoS Feature
~~~~~~~~~~~

The Neutron QoS extension driver can now be enabled by setting the 'enable-qos'
configuration option in the neutron-api charm. Once this is set neutron rate
limiting qos policies can be created and applied to both ports and networks.

Gnocchi Support
~~~~~~~~~~~~~~~

The OpenStack charms now support deployment of Gnocchi for storage of resources,
metrics and associated measures generated by Ceilometer from an OpenStack Cloud.

This is the first GA/stable release of the Gnocchi charm, following the preview
release at 17.08.  The charm provides support for use with Ceph for measure
storage, with MySQL providing the supporting database infrastructure.

The gnocchi charm has been officially released and can be deployed via the
official charm namespace in the charm store:

.. code:: bash

    juju deploy cs:gnocchi
    juju deploy cs:memcached
    juju add-relation gnocchi ceph-mon
    juju add-relation gnocchi ceilometer
    juju add-relation gnocchi mysql
    juju add-relation gnocchi keystone
    juju add-relation gnocchi memcached

.. note::

   The Ceilometer API will be automatically disabled as soon as Ceilometer
   is configured to store cloud telemetry data in Gnocchi.

.. note::

   The Gnocchi charm only supports deployment of Gnocchi with
   OpenStack Ocata or later.

Designate Memcache Backend (Required)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The designate charm now supports and requires a memcached back-end.  If upgrading
the charms on a previous deployment, the designate unit(s) will go into a blocked
state until the coordinator-memcached requirement is fulfilled.

The existing applications will continue to function, but until memcached is deployed
and related to designate, the Juju model state will be blocked.

.. code:: bash

    juju deploy memcached
    juju add-relation designate memcached

https://bugs.launchpad.net/charm-designate/+bug/1733641

Python 3-Only Run-Time
~~~~~~~~~~~~~~~~~~~~~~
There is a continued effort to bring the charms into a Py3-only run-time. This
effort is intended to be completed for the next stable charms release (18.02).
No user or config changes are necessary for charm upgrades or new deployments.

Reactive charms which are now py3-only:

* barbican
* barbican-softhsm
* manila
* manila-generic
* designate
* designate-bind
* keystone-ldap
* openvswitch-odl
* tempest

Classic charms which are now py3-only:

* ceph-mon
* ceph-osd
* heat
* neutron-api
* neutron-gateway
* neutron-openvswitch
* nova-compute

Classic charms which are still using py2 at run-time:

* swift-proxy
* keystone
* ceilometer
* glance
* cinder
* nova-cloud-controller

Libraries with py2/py3 support:

* charm-helpers
* charms.ceph

Libraries with py3 only support:

* charms.openstack

Upgrading charms
================

Please ensure that the keystone charm is upgraded first.

To upgrade an existing deployment to the latest charm version simply use the
'upgrade-charm' command:

.. code:: bash

    juju upgrade-charm keystone

New Bundle Features
===================

Ceph Base Bundles
~~~~~~~~~~~~~~~~~

A development ceph-base bundle was published as preview at 17.08.  It is now
validated with x86_64 (amd64), aarch64 (arm64), and ppc64el (Power8), and a
stable ceph-base bundle is published to the charm store with the 17.11 release.

The bundle provides an example for deploying a stand-alone Ceph Luminous
cluster on Ubuntu 16.04 LTS.

Deprecation Notices
===================

The legacy "ceph" charm is deprecated and will not receive updates past
February 2018 (18.02).  At this time, all deployments should be using the
ceph-osd + ceph-mon deployment method.

    Queens is the final supported OpenStack release for this charm.

    Artful is the final supported Ubuntu release for this charm.

    Xenial is the final supported Ubuntu LTS release for this charm.

    There will not be a Bionic series legacy ceph charm developed or released.

    Existing users of the legacy ceph charm should refer to Appendix A of the
    Charm Deployment Guide for details of how to migration existing deployments
    to the preferred ceph-mon and ceph-osd charms.

    https://docs.openstack.org/charm-deployment-guide

ZeroMQ messaging support across the charms will be removed during the Queens
development cycle.

PostgreSQL database support across the charms will be removed during the
Queens developement cycle.

Deploy from Source (DFS) support is under review for sustainability and may be
removed during the Queens development cycle.

Known Issues
============

hacluster scale-out
~~~~~~~~~~~~~~~~~~~

By default, the hacluster charm will assume a cluster size of three units; in
order to scale a three unit clustered application out, you must increase the
cluster-count configuration option to the target size prior to adding the
additional units to the clustered application.

https://bugs.launchpad.net/charm-hacluster/+bug/1424048

Bugs Fixed
==========

For the full list of bugs resolved for the 17.11 release please refer to
https://launchpad.net/openstack-charms/+milestone/17.11

